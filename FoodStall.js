// Data for cards
const EliteCafeData = [
    {
        image: 'Images/EliteCafePic/MochaMilkTea.png', heading: 'Mocha Milk Tea',
        body: '', price: '29.00', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/EliteCafePic/StrawberryMilkTea.png', heading: 'Strawberry Milk Tea',
        body: '', price: '29.00', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/EliteCafePic/MatchaMilkTea.png', heading: 'Matcha Milk Tea',
        body: '', price: '29.00', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/EliteCafePic/ChocolateMilkTea.png', heading: 'Chocolate Milk Tea',
        body: '', price: '29.00', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/EliteCafePic/TaroMilkTea.png', heading: 'Taro Milk Tea',
        body: '', price: '29.00', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/EliteCafePic/MangoMilkTea.png', heading: 'Mango Milk Tea',
        body: '', price: '29.00', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
];


const MachiMangoData = [
     {
        image: 'Images/MachiMangoPic/MangoGrahamShake45.png', heading: 'Mango Graham Shake',
        body: 'Medium 12 oz', price: '45', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/MachiMangoPic/MangoGrahamShake55.png', heading: 'Mango Graham Shake',
        body: 'Large 16 oz', price: '55', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
];

const McJolliData = [

     {
        image: 'Images/McJolliPic/CheeseBurger.png', heading: 'Cheese Burger',
        body: '', price: '25', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/EggBurger.png', heading: 'Egg Burger',
        body: '', price: '25', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/RegularBurger.png', heading: 'Regular Burger',
        body: '', price: '20', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/FootLong.png', heading: 'Half-Long',
        body: '', price: '25', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/Fries.png', heading: 'Fries',
        body: '', price: '20.00',rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/CheeseStick.png', heading: 'Cheese Stick',
        body: '20', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
      {
        image: 'Images/McJolliPic/RegularBurger.png', heading: 'Special Burger',
        body: '35', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/FootLong.png', heading: 'Foot Long',
        body: '35', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/Fries40.png', heading: 'Fries',
        body: '40', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/BlueberrySoda.png', heading: 'Blueberry Soda',
        body: '29', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/GrapeSoda.png', heading: 'Grape Soda',
        body: '29', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/GreenAppleSoda.png', heading: 'Green Apple Soda',
        body: '29', rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/MangoShake.png', heading: 'Mango Shake',
        body: '29',  rating: '4.9',
        star: 'Images/Star1.png', button: 'Images/Cart Button.png'
    },
     {
        image: 'Images/McJolliPic/OrangeShake.png',
        heading: 'Orange Shake',
        body: '29',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
     {
        image: 'Images/McJolliPic/StrawberryShake.png',
        heading: 'Strawberry Shake',
        body: '29',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/KiwiShake.png',
        heading: 'Kiwi Shake',
        body: '29',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/McJolliPic/FourSeasonShake.png',
        heading: 'Four Season Shake',
        body: '29',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },{
        image: 'Images/McJolliPic/DalandanShake.png',
        heading: 'Dalandan Shake',
        body: '29',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },{
        image: 'Images/McJolliPic/BukoShake.png',
        heading: 'Buko Shake',
        body: '29',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },{
        image: 'Images/McJolliPic/PomeloShake.png',
        heading: 'Pomelo Shake',
        body: '29',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
]


const pardzData = [
     {
        image: 'Images/PardzPic/ParesMami.png',
        heading: 'Pares Mami',
        body: '60',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/PardzPic/ParesBulaklak.png',
        heading: 'Pares Bulaklak',
        body: '69',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/PardzPic/ParesLaman.png',
        heading: 'Pares Laman',
        body: '69',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/PardzPic/OverloadPares.png',
        heading: 'Overload Pares',
        body: '109',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/PardzPic/Liemposilog.png',
        heading: 'Liemposilog',
        body: '60',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/PardzPic/Tocilog.png',
        heading: 'Tocilog',
        body: '69',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/PardzPic/Chicksilog.png',
        heading: 'Chicksilog',
        body: '69',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/PardzPic/Mountaindew.png',
        heading: 'Mountain Dew',
        body: '20',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
]

const NanayData = [
    {
        image: 'Images/NanayPic/SiomaiRice.png',
        heading: 'Siomai Rice',
        body: '40',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/NanayPic/PancitCantonRice.png',
        heading: 'Pancit Canton Rice',
        body: '20',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/NanayPic/Kwek-Kwek.png',
        heading: 'Kwek-Kwek',
        body: '20',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/NanayPic/Siomai.png',
        heading: 'Siomai',
        body: '20',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
      {
        image: 'Images/NanayPic/Sprite.png',
        heading: 'Sprite',
        body: '25',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/NanayPic/Coke.png',
        heading: 'Coke',
        body: '25',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/NanayPic/3-in-1Coffee.png',
        heading: '3-in-1 Coffee',
        body: '15',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/NanayPic/BottledWater.png',
        heading: 'Bottled Water',
        body: '15',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
]

const drekitosData= [
      {
        image: 'Images/DrekitosPic/ChickenShawarmaRice.png',
        heading: 'Mountaindew',
        body: '45',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    {
        image: 'Images/DrekitosPic/BeefShawarma.png',
        heading: 'Mountaindew',
        body: '45',
        rating: '4.9',
        star: 'Images/Star1.png',
        button: 'Images/Cart Button.png'
    },
    
]
let foodStalls = [
   { id: "EliteCafe", data: EliteCafeData},
   { id: "MachiMango", data: MachiMangoData},
   { id: "McJolli", data: McJolliData},
   { id: "pardz", data: pardzData},
   { id: "Nanay", data: NanayData},
   { id: "Drekitos", data: drekitosData},
]



let postContainer = document.querySelector('.card-container');
let slideContainer = document.querySelector('#cart-icon');


// Loop through stalls and attach click events
foodStalls.forEach(stall => {
    const element = document.getElementById(stall.id);
    if (element) {
        element.addEventListener('click', () => {
            console.log("Clicked " + stall.id);
            createCards(stall.data); // Create new cards
        });
    } else {
        console.warn(`Element with ID "${stall.id}" not found.`);
    }
});


slideContainer.addEventListener('click', () => {
  const slideBox = document.querySelector('.box1'); // Select the container

  // Check if a column1 element already exists
  const existingColumn1 = slideBox.querySelector('.column1');
  if (existingColumn1) {
    console.log('Column1 already exists. No new column will be created.');
    return; // Exit the function if column1 already exists
  }



  // Create a new column1 div
  const column1 = document.createElement('div');
  column1.classList.add('column1'); 

  const row1 = document.createElement('div');
  row1.classList.add('row1');
  
  const rowName = document.createElement('p');
  rowName.textContent = 'Item Summary';
  row1.appendChild(rowName);

  const rowItems = document.createElement('div');

  
  column1.appendChild(row1);

  // Append the new column1 to the box1 container

  slideBox.appendChild(column1);
  console.log('New Column1 created.');
});






function deletePrevCards() {
    const postContainer = document.querySelector('.card-container');
    if (postContainer) {
        while (postContainer.firstChild) {
            postContainer.removeChild(postContainer.firstChild);
        }
    }
}



let cartItems = []; // To store items added to the cart


const sideCart = document.querySelector('.side-cart');
const cartItemsList = document.querySelector('.side-cart-items');
const checkoutBtn = document.querySelector('.checkout-btn');
const clearCartBtn = document.querySelector('.clear-cart-btn');

const cardContainer = document.querySelector('.card-container');

// Function to toggle the side cart visibility
function toggleCart() {
    sideCart.classList.toggle('active');
    cardContainer.classList.toggle('shifted'); // Add or remove the shifted class
}

// Function to add an item to the cart
function addToCart(item) {
    // Add the item to the cart array
    cartItems.push(item);

    // Update the cart UI
    updateCartUI();
}

// Function to update the cart UI
/*function updateCartUI() {
    const cartContainer = document.querySelector('.side-cart .side-cart-items');
    cartContainer.innerHTML = ''; // Clear existing items

    if (cartItems.length === 0) {
        const noCart = document.createElement('div');
        noCart.classList.add('empty-cart-message');
        
        const noCartP = document.createElement('p');
        noCartP.textContent = "No items are added.";
        noCart.appendChild(noCartP);
        
        cartContainer.appendChild(noCart);
        return;
    }

    // Populate the cart with items
    cartItems.forEach((item, index) => {
        const cartItem = document.createElement('li');
        cartItem.classList.add('side-cart-item');

        const itemDetails = document.createElement('div');
        itemDetails.classList.add('side-item-details');
        itemDetails.textContent = item.heading; // Assuming `name` is a property of `item`

        const totalPriceP = document.createElement('p');
        totalPriceP.textContent = 'Total Price';

        const totalPrice = document.createElement('scan');
        totalPrice.textContent += item.body;

        const removeBtn = document.createElement('button');
        removeBtn.textContent = 'Remove';
        removeBtn.addEventListener('click', () => removeFromCart(index));


        const cartFooter = document.createElement('div');
        cartFooter.classList.add('side-cart-footer');


        const orderBtn = document.createElement('button');
        orderBtn.textContent = 'Order';
        /*orderBtn.addEventListener('click', () => addToCartWindow)
        
        cartItem.appendChild(itemDetails);
        cartItem.appendChild(totalPriceP);
        cartItem.appendChild(totalPrice);
        cartItem.appendChild(removeBtn);
        cartFooter.appendChild(orderBtn);
        cartItem.appendChild(cartFooter);


        cartContainer.appendChild(cartItem);
      
    });
}*/


// Function to remove an item from the cart
function removeFromCart(index) {
    const cartContainer = document.querySelector('.side-cart .side-cart-items');
    
    // Check if the index is valid and the cart is not empty
    if (index >= 0 && index < cartItems.length) {
        cartItems.splice(index, 1); // Remove the item from the cart array
        updateCartUI(); // Update the cart display
    } else if (cartItems.length === 0) {
        // Clear the cart UI
        cartContainer.innerHTML = ''; 
        
        // Display "No items are added" message
        const noCart = document.createElement('div');
        noCart.classList.add('empty-cart-message'); // Optional: Add a class for styling
        
        const noCartP = document.createElement('p');
        noCartP.textContent = "No items are added.";
        noCart.appendChild(noCartP);
        
        cartContainer.appendChild(noCart);
    }
}

// Example: Add event listeners to buttons in the createCards function
function createCards(foodstallDataSet) {
    const postContainer = document.querySelector('.card-container');
    deletePrevCards();

    const fragment = document.createDocumentFragment();

    foodstallDataSet.forEach((data) => {
        const card = document.createElement('div');
        card.classList.add('card');

        const cardImage = document.createElement('img');
        cardImage.src = data.image;
        card.appendChild(cardImage);

        const cardTitle = document.createElement('h2');
        cardTitle.textContent = data.heading;
        card.appendChild(cardTitle);

        const cardBody = document.createElement('p');
        cardBody.textContent = data.body;
        card.appendChild(cardBody);

        const cardPrice = document.createElement('p');
        cardPrice.textContent = '₱' + data.price;
        card.appendChild(cardPrice);

        const cardRate = document.createElement('span');
        cardRate.textContent = data.rating;
        card.appendChild(cardRate);

        const cardStar = document.createElement('img');
        cardStar.src = data.star;
        cardStar.alt = 'Star';
        cardStar.style.width = '10px';
        cardStar.style.height = '10px';

        cardRate.appendChild(cardStar);

        const cartBtn = document.createElement('button');
        cartBtn.style.border = 'none';
        cartBtn.style.background = 'none';
        cartBtn.style.cursor = 'pointer';

        const cartImg = document.createElement('img');
        cartImg.src = data.button;
        cartImg.alt = 'Add to Cart';
        cartImg.style.width = '24px';
        cartImg.style.height = '24px';

        cartBtn.appendChild(cartImg);

        // Add event listener to the button
        cartBtn.addEventListener('click', () => {
            addToCart(data); // Add the clicked item to the cart
            toggleCart(); // Open the cart and shift the container
        });

        card.appendChild(cardRate);
        card.appendChild(cartBtn);
        fragment.appendChild(card);
    });

    postContainer.appendChild(fragment);
}


// Get the cart icon and slide box
const cartIcon = document.getElementById('cart-icon');
const slideBox = document.querySelector('.slide-box');

// Toggle the visibility of the slide box when the cart icon is clicked
cartIcon.addEventListener('click', () => {
  slideBox.classList.toggle('active'); // Add or remove the 'active' class
});












/////


function updateCartUI() {
    const cartContainer = document.querySelector('.side-cart .side-cart-items');
    cartContainer.innerHTML = ''; // Clear existing items

    if (cartItems.length === 0) {
        const noCart = document.createElement('div');
        noCart.classList.add('empty-cart-message');

        const noCartP = document.createElement('p');
        noCartP.textContent = "No items are added.";
        noCart.appendChild(noCartP);

        cartContainer.appendChild(noCart);
        return;
    }

    // Populate the cart with items
    cartItems.forEach((item, index) => {
        const cartItem = document.createElement('li');
        cartItem.classList.add('side-cart-item');

        const itemDetails = document.createElement('div');
        itemDetails.classList.add('side-item-details');
        itemDetails.textContent = item.heading;

        const totalPriceP = document.createElement('p');
        totalPriceP.textContent = 'Total Price';

        const totalPrice = document.createElement('span');
        totalPrice.textContent = '₱' + item.price;

        const removeBtn = document.createElement('button');
        removeBtn.textContent = 'Remove';
        removeBtn.addEventListener('click', () => removeFromCart(index));

        const cartFooter = document.createElement('div');
        cartFooter.classList.add('side-cart-footer');

        const orderBtn = document.createElement('button');
        orderBtn.textContent = 'Order';
        orderBtn.addEventListener('click', () => addOrderToSlideBox(item, index)); // Add order to the slide box

        cartItem.appendChild(itemDetails);
        cartItem.appendChild(totalPriceP);
        cartItem.appendChild(totalPrice);
        cartItem.appendChild(removeBtn);
        cartFooter.appendChild(orderBtn);
        cartItem.appendChild(cartFooter);

        cartContainer.appendChild(cartItem);
    });
}

// Function to add an order to the slide-box
function addOrderToSlideBox(item, index) {
    const slideBox = document.querySelector('.slide-box .box1');

    // Create a new div for the ordered item
    const orderedItem = document.createElement('div');
    orderedItem.classList.add('ordered-item');

    const itemName = document.createElement('p');
    itemName.textContent = item.heading;

    const itemPrice = document.createElement('p');
    itemPrice.textContent = '₱' + item.price;

    // Add the order to the slide-box
    orderedItem.appendChild(itemName);
    orderedItem.appendChild(itemPrice);
    slideBox.appendChild(orderedItem);

    // Remove the item from the cart
    removeFromCart(index);

    // Notify user
    console.log(`Order for "${item.heading}" has been added to the slide-box.`);
}
